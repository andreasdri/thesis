\chapter{Diskusjon}
\label{ch:discussion}

Det er arkitekturen og basisteknologien som er det viktige i dette forskningsprosjektet. Basisteknologien
ble satt inn i et praktisk problem i et komplekst domene. Sensorer til støtte for avstandsoppfølging er et
godt eksempel på noe som kan kobles til den nye arkitekturen for tingenes internett, som beskrevet av \citet{iot_harvard_smart}.

Prototypen ble laget
for å si noe om denne basisteknologien med forskningsstrategien design og kreasjon. Case-studien av avstandsoppfølging
i Trondheim kommune ble gjennomført for å øke kunnskapen om domenet og finne ut hvilke utfordringer kommunen sliter med.
Det viste seg at kommunen hadde problemer med å få til tofaktorautentisering eller noe med tilsvarende grad av sikkerhet. Kommunen
jobbet også med å få til sertifikater og distribusjon av sertifikater. Eksisterende skyteknologi har allerede noe av dette innebygget.
AWS IoT har infrastruktur for å håndtere sertifikater, selv om distribusjonen av sertifikatene
til enhetene må ordnes på egenhånd.

Prosjektet viste at det er enkelt å sette opp et standard grafsystem med målinger tilbake i tid på toppen av åpne kildekode-løsninger
på veldig kort tid. Kommunen var imponert over hvor langt prosjektet hadde kommet på en måned med utvikling.
Under evalueringen pekte kommunen på at de i dag har for dårlige verktøy til å se på måledata, og dermed
ikke kan nyttiggjøre seg sensorteknologien. Leverandørene av tjenester til bruk i velferdsteknologi har et ansvar for
å levere gode løsninger og ta i bruk ny teknologi, spesielt dersom de får være med på forsknings- og utviklingsprosjekt (FOU). Kommunen
har selv sagt i intervju at de ønsker å være fremoverlente på teknologi og til stede på de plattformene brukerne er.
Det er tydelig at de løsningene kommunen bruker i dag
ikke ser så moderne ut og bruker modifisert hyllevare fra leverandøren.

Det hadde vært ønskelig om prosjektet hadde kommet enda lengre med implementasjonen av en større skyløsning med
toveiskommunikasjon og mer tilbakemeldinger til brukeren for å løse flere av utfordringene kommunen og SINTEF pekte på.
Dette kunne dannet et enda større bilde av egnetheten
til skybasert IoT som teknologisk plattform for avstandsoppfølging. Allikevel er erfaringene at arkitekturen for sensoren fungerte
veldig bra og at det var enkelt å komme i gang med. Dokumentasjonen til skyteknologien var god. Prosjektet sitter igjen med at
plattformen var til å stole på og har høy tillit til at det fungerer.

MQTT ble brukt som kommunikasjonsprotokoll mellom prototype og skyløsning.
På en annen side kunne kanskje en mer tradisjonell løsning også fungert.
MQTT-protokollen egner seg kanskje enda bedre for sensorer
som sender data kontinuerlig. Brukeren sender 20 sekunder med data hver dag i bruksscenarioet som ble skissert i dette prosjektet. Det er ikke så veldig
mye data. Den samme dataen kunne blitt sendt over HTTPS og en standard arkitektur som REST istedenfor.
Istedenfor sertifikater for autentisering kunne en brukt tokens med så og så lang gyldighet som bevis på at enheten er logget inn.

I fremtiden kan det hende at det blir mer aktuelt å gå med sensorer over lengre tidsperioder dersom det blir vurdert som klinisk relevant
for en bruker. I så fall vil AWS IoT være veldig skalerbar og pålitelig for å håndtere en økt mengde meldinger. Verdien av
automatisk skalerbarhet, en lang rekke med mulige integrasjoner og at man slipper å ha egen infrastruktur må ikke undervurderes.

Selv om AWS IoT har god nytteverdi mellom klient og server, har ikke skyplattformen noe med kommunikasjonen fra sensor til klient. Her er det
det Bluetooth-teknologien som råder og kommunen er prisgitt at leverandørene er tidlig ute med ny teknologi. I praksis vil nok ikke
sikkerhetsrisikoen ved bruk av Bluetooth være så stor. Angriperne må være helt i nærheten for at det skal være teoretisk mulig å sette i gang
et angrep.

\section{Metodediskusjon}
Starten av diskusjonskapittelet trakk mest fram det positive med valgene av metodikk i dette prosjektet.
Det hadde vært nyttig med mer teknisk informasjon om hvordan HelsaMi+ fungerer fra leverandøren for å sammenligne,
se hvor langt de har kommet sikkerhetsmessig og hva de tenker om fremtiden. Leverandøren Imatis ble kontaktet for et
intervju, men de svarte ikke på henvendelsen. Kanskje mer burde blitt gjort for å snakke med en leverandør av tekniske løsninger
til dette prosjektet. Det er en viktig komponent som mangler litt. Det er en annen leverandør i Oslo og Sarpsborg.
De to leverandørene kunne blitt sammenlignet med tanke på hva de tilbyr av tjenester og hvordan de har bygget opp sin løsning
mot avstandsoppfølging. Det kunne vært interessant å høre hva leverandørene tenker om denne arkitekturen for avstandsoppfølging,
hva de identifiserer som de største utfordringene for en slik arkitektur og om de planlegger å gå over på en lignende
arkitektur selv. Dette er noe som kan jobbes videre med i andre forskningsprosjekt. Mulighetene er absolutt til stede
for å sette opp en lignende arkitektur fra bunnen av selv med egen infrastruktur.

Hele temaet er veldig stort, og det hadde kanskje vært
lurere å snevret inn hvilke kvalitetskrav man skulle sette ekstra søkelys på, og hvordan disse kravene
skulle vært testet slik at en kunne gjort et bedre dypdykk
og snakket med eksperter innenfor det området. På den måten kunne en for eksempel sett nærmere på problematikken rundt
tofaktorautentisering og snakket med eksperter på det.

\iffalse
\section{Utfordringer for teknologi i avstandsoppfølging}
Kapittel \ref{ch:case} viser at Trondheim kommune ønsker å være tidlig ute med ny teknologi, men at dette kan være vanskelig å
få til i praksis. De er også klare på at det er teknologien som skal understøtte tjenesten og ikke motsatt. Den største
utfordringen er å få rullet ut tjenesten til flere hundre brukere i en stor organisasjon. Det er i denne konteksten
man må se hvordan teknologi kan hjelpe kommunen med å løse sine problemer. Kommunen opplever at brukerne er veldig forskjellige, og
at de har forskjellige behov. Det er ikke alle som kan bruke sensorer. De er klare på at tjenesten må tilpasses individuelt til hver
enkelt bruker. Målet er at brukeren skal oppleve økt trygghet.

Under evalueringen pekte kommunen på at de i dag har for dårlige verktøy
til å se på måledata, og dermed ikke kan nyttiggjøre seg sensorteknologien så veldig godt. Dette er noe som kommunen og andre kan jobbe med
for å forbedre. Det er ikke så komplisert å sette opp enkle grafsystemer. Grafana som ble brukt under dette prosjektet er åpen kildekode.
Kommunen har ikke så mye annet valg enn å forholde seg til leverandører av programvare og helseprodukter dersom de
ikke skal ha utviklere ansatt hos seg. Leverandørene og produsentene
har dermed et stort anvar for å lage gode løsninger og ta i bruk ny teknologi tidlig. Det er tydelig at de løsningene kommunen bruker i dag
ikke ser så moderne ut og bruker modifisert hyllevare. Allikevel sier brukerne at de synes systemene er greie å bruke. Nonin kunne ha laget
et mer helintegrert pulsoksymeter, men det ville komplisert deres ansvarsområder veldig. Det er enklere for produsenten å konsentrere seg om
selve oksimeterteknologien og gi et grensesnitt for andre å integrere med.

\section{Utvikling og evaluering av en frittstående prototype}
Utviklingen av prototypen skjedde ikke så brukernært som det kanskje var ønsket i starten av prosjektet. Det ble kun tid
til én iterasjon der målet først var å få til to runder med tilbakemelding i mellom. Det tok litt tid før alle komponenter kom fram,
og i starten ble en annen prototypeplattform valgt og prøvd istedenfor Raspberry Pi Zero W.
Det var også opprinnelig et ønske om å få til mer toveiskommunikasjon, for eksempel et varsel med pulserende lys til brukeren
når det var tid for å foreta en måling. Dette ble det ikke tid til, men kan være noe å prøve ut i fremtiden. I implementasjonsperioden
var det utfordrende å få klientprototypen til å fungere tilfredsstillende siden det var så mange komponenter som skulle fungere sammen
med forskjellige eventer, avbrudd og en komplisert tilstandsmaskin. Disse utfordringene gjorde at det ikke ble så god tid til å jobbe
med toveiskommunikasjon og en større skyimplementasjon.

Fingeravtrykket fra enheten må lagres i skyløsningen som en fil, og knyttes til hver enkelt bruker. Når brukeren
ønsker å autentisere seg, må fingeravtrykket hentes til enheten, og så sjekkes. Tofaktorautentisering er at man
sier hvem man er på to forskjellige måter. Som oftest er det to av følgende: noe en vet, noe en har eller noe en er.
Enhet med sertifikat er noe en har, og fingeravtrykk er noe en er. I teorien kan det dermed bety at prototypen
oppfyller kravene til en tofaktorautentisering, men dette er noe som må undersøkes nærmere med eksperter på sikkerhet.
Andre autentiseringsstrategier enn fingeravtrykkssensor må uansett undersøkes siden den ikke passer for alle brukere.

Fordelen med å basere seg på eksisterende plattformer som Android og iOS er at man får mye gratis i form
av blant annet sikkerhetsoppdateringer og rammeverk for brukergrensesnitt. Dette er noe en må ordne selv i en
frittstående løsning. Eksisterende plattformer har allerede mye infrastruktur som kan av laste kommunen. I tillegg
har mange av brukerne enheter som kjører på disse plattformene fra før av. iOS-telefoner og mange Android-telefoner
har innebygget fingeravtrykkssensor og muligheten til å styre disse fra programvare. Det kunne erstattet behovet for
en tredjepartssensor. Det ville muligens tatt kortere tid å implementere noe på disse plattformene siden det ville vært
mindre behov for å skrive helt nye integrasjoner mot komponenter og mindre jobb med den fysiske utformingen.

\section{En arkitektur for skybasert IoT}
En arkitektur for skybasert IoT for avstandsoppfølging kan være basert på AWS IoT som gir mye verdi for en utvikler ut av boksen.

MQTT ble brukt som kommunikasjonsprotokoll mellom prototype og skyløsning. Denne protokollen egner seg kanskje enda bedre for sensorer
som sender data kontinuerlig. Brukeren sender 20 sekunder med data hver dag i bruksscenarioet som ble skissert i dette prosjektet. Det er ikke så veldig
mye data. Den samme dataen kunne blitt sendt over HTTPS og en standard arkitektur som REST istedenfor. Det hadde vært mulig å bruke
en mer tradisjonell backendløsning istedenfor å basere seg på AWS IoT. Istedenfor sertifikater for autentisering
kunne en brukt tokens med så og så lang gyldighet som bevis på at enheten er logget inn. Spørsmålet er hvor mye verdi AWS IoT egentlig gir
for avstandsoppfølging.

Device shadows ble ikke brukt i dette prosjektet, men det kunne gitt en bra base for å håndtere tilstanden til hver enhet, og manipulere denne tilstanden
fra en adminapplikasjon. Det hadde vært relevant for å implementere en økt grad av toveiskommunikasjon. AWS gir flere slike nyttige verktøy for
å håndtere infrastrukturen på en enklere måte.
% noe om sanntidsanalyse
\fi

\section{Validitet} % Dag: validitet (??)
\label{sec:validitet}

\subsection{Bekreftbarhet og pålitelighet}
Tidligere i kapittelet ble fremgangsmåten til studiet presentert. All kode ligger åpent tilgjengelig på Internett slik at hvem som helst kan
titte på den. Transkriberinger av intervjuene er tilgjengelige ved forespørsel. Tidligere ble implementasjonen av prototypen beskrevet i
så god detalj at det er mulig å lage noe tilsvarende kun ved å lese i teksten og se på koden.

\subsection{Troverdighet}
Alle intervjuene med Trondheim kommune må tolkes med det faktum at prosjektlederne har en tilknytning som
gjør at de ønsker at avstandsoppfølgingprosjektet
skal lykkes i bakhodet. Aktører direkte involvert i et prosjekt er mottakelige for bekreftelsestendenser der man søker etter å bekrefte noe
man allerede tror. Selv om SINTEF er en tredjepart som bistår Trondheim kommune, er de også mye involvert i prosjektet.
Det er mulig at forskningen kunne blitt enda mer troverdig med en kritisk tredjepart uten direkte tilknytning til velferdsteknologiprosjektet i Trondheim --
gjerne en stemme som ikke er udelt positiv til avstandsoppfølging som teknologi for velferd.
Fordelen med å snakke med personer som jobber med avstandsoppfølging i Trondheim kommune, er at de har veldig god kunnskap om temaet
og muligheten til å sammenligne løsningen som presenteres i denne forskningen med noe som eksisterer i praksis i dag.
De er en troverdig stemme i avstandsoppfølgingdebatten.

\subsection{Overførbarhet}
Spørsmålet som må stilles er om funnene og arbeidet gjort i dette prosjektet kan overføres til avstandsoppfølging som generelt tilfelle.
Trondheim kommune brukes som eksempel, og konklusjonen vil generalisere med kun dette tilfellet som bakgrunn.
Er det faktisk mulig å finne noen implikasjoner for utviklingen av skybasert \gls{iot} som teknologisk plattform for avstandsoppfølging?
Hvilke resonnementer og argumenter er i så fall disse resonnementene fundert i?

Trondheim kommune har ikke så mange brukere med sensorer, og SINTEF trakk fram at andre kommuner har kommet lengre på det området. Uansett
vil det være rimelig å anta at andre kommuner og leverandører vil ha noe av den samme problematikken som Trondheim med sikkerhet, sertfikater, autentisering,
personvern og skalering.
% @Todo ??? 
% Det som taler for at man kan det er at
% Det som taler mot er at 

\iffalse
\section{Begrensninger med
prototypen}\label{begrensninger-med-prototypen}

\begin{itemize}
\tightlist
\item
  Lav grad av toveiskommunikasjon implementert i prototypen, men rammeverket gjør det mulig.
\item
  Fingeravtrykk-template lagres direkte på sensoren, den burde blitt
  hentet fra sensoren og så lagret i skyen. Deretter burde den blitt
  hentet hver gang man trengte den.
\item
  Paring og bonding med Bluetooth. Enheten må pares hver gang i
  prototypen. Dette er en begrensning med det underliggende rammeverket
  som brukes.
\item
  I prototypen brukes MQTT over WebSockets til å sende data. Men det er
  såpass få målepunkter som sendes hver dag at man like gjerne kunne
  brukt HTTP REST med kryptering. Det er få fordeler med å bruke en
  protokoll som MQTT i dette prosjektet. Det hadde vært mer relevant om
  sensorene sendte data kontinuerlig hele døgnet.
\end{itemize}

\section{Sikkerhet}\label{sikkerhet}

\begin{itemize}
\tightlist
\item
  Tofaktorautentisering
\item
  Hva oppfyller kravene til tofaktorautentisering? Oppfyller
  klientsertifikat og enhet utplassert i hjem sammen med
  fingeravtrykksensor kravene?
\item
  Hvilke alternativer finnes det til å bruke fingeravtrykkssensor som
  autentisering? Både med tanke på brukbarhet og sikkerhet.
\item
  Bluetooth
\item
  BLE har flere sikkerhetsproblemer, spesielt i versjon 4.0 og 4.1. Skal
  man gjøre en oppfordring om kun å bruke Bluetooth 4.2? Hvilke
  avveininger og anbefalinger burde man gjøre dersom man må bruke en
  enhet med 4.0 eller 4.1? Det tar lang tid å ta i bruk en ny
  Bluetooth-standard. Produsenter av velferdsteknologi må følge med på
  den teknologiske utviklingen. Problemer her: tar lang tid å få et
  produkt godkjent, koster sikkert masse penger.
\end{itemize}

\section{Personvern og datalagring}\label{personvern-og-datalagring}

\begin{itemize}
\tightlist
\item
  Krav om at norske helsedata skal ligge i Norge. Dermed kan man ikke
  bruke en eksisterende skyløsning som AWS. AWS lagrer data i Europa.
  Det fører til at mye av infrastrukturen må lages fra bunnen av. Snakk
  om at Azure skal få til en løsning der man har hele økosystemet
  kjørende i Norge.
\item
  Ny personvernforordning gir flere rettigheter til forbrukere. Det
  gjelder blant annet kontroll på egen data, oversikt over hva den
  brukes til, mulighet til å slette den osv. Man må kunne argumentere
  for at dataen som lagres er nyttig for forbrukeren. Er da å lagre all
  sensordataen nyttig? Kan man argumentere for det?
\end{itemize}

\section{Frittstående løsninger kontra nettbrett, mobil,
PC}\label{frittstuxe5ende-luxf8sninger-kontra-nettbrett-mobil-pc}

Diskusjon og drøfting på bakgrunn av evalueringen om hvor vellykket det
var å implementere en frittstående løsning. Hvilke fordeler og ulemper
har man med å ta i bruk et eksisterende økosystem? Stikkord:
sikkerhetsoppdateringer, vedlikehold, innkjøpskostnad, hva har brukere
hjemme osv.

\section{Metodediskusjon}\label{metodediskusjon}

\begin{itemize}
\tightlist
\item
  Diskutere forskningsmetodene som er brukt? Hvor stor troverdighet kan
  man ha til forskningen? Kunne noe vært gjort annerledes?
\end{itemize}
\fi
